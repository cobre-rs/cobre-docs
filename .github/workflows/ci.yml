name: CI

on:
  pull_request:
    branches: [main]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Install mdBook
        uses: peaceiris/actions-mdbook@v2
        with:
          mdbook-version: "latest"

      - name: Install mdbook-katex
        run: |
          curl -sSL https://github.com/lzanini/mdbook-katex/releases/download/0.10.0-alpha-binaries/mdbook-katex-v0.10.0-alpha-x86_64-unknown-linux-gnu.tar.gz | tar xz
          chmod +x mdbook-katex
          sudo mv mdbook-katex /usr/local/bin/

      - name: Build book
        run: mdbook build

      - name: Check for broken links
        run: mdbook test
